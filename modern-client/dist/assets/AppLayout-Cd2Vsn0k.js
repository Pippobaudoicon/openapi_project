import{y as S,q as M,r as $,z as O,o,l as w,c as a,h as v,x as g,a as e,t as m,u as H,f as y,g as A,F,s as D,d as p,i as b,p as q,A as I,m as C,w as P,v as T,B as U,T as N}from"./index-Cy8y1Ck6.js";import{u as R}from"./company-C-ste4eM.js";const E=["d"],K={key:0,class:"ml-3 transition-opacity duration-200"},Q={key:1,class:"absolute left-0 w-1 h-6 bg-primary-600 rounded-r-full"},W={__name:"SidebarItem",props:{item:{type:Object,required:!0},isOpen:{type:Boolean,default:!0}},setup(n){const r=n,h=S(),i=M(()=>h.path===r.item.to||h.path.startsWith(r.item.to+"/"));return(u,d)=>{const s=$("router-link");return o(),O(s,{to:n.item.to,class:g(["group flex items-center px-3 py-2 text-sm font-medium rounded-xl transition-all duration-200",i.value?"bg-primary-100 text-primary-700 border border-primary-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"])},{default:w(()=>[(o(),a("svg",{class:g(["flex-shrink-0 w-5 h-5 transition-colors duration-200",i.value?"text-primary-600":"text-gray-400 group-hover:text-gray-600",!n.isOpen&&"mx-auto"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:n.item.icon},null,8,E)],2)),n.isOpen?(o(),a("span",K,m(n.item.name),1)):v("",!0),!n.isOpen&&i.value?(o(),a("div",Q)):v("",!0)]),_:1},8,["to","class"])}}},G={class:"relative"},J={class:"flex items-center justify-center h-16 border-b border-gray-200"},X={key:0,class:"flex items-center space-x-3"},Y={key:1,class:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center"},Z={class:"mt-6 px-3"},ee={class:"space-y-1"},te={key:0,class:"absolute bottom-20 left-0 right-0 mx-3"},se={class:"bg-primary-50 rounded-xl p-4 border border-primary-200"},oe={class:"flex items-center space-x-3"},re={class:"text-xs text-primary-700"},ae={class:"absolute bottom-0 left-0 right-0 p-3 border-t border-gray-200"},ne={key:0,class:"flex items-center space-x-3"},ie={class:"flex-1 min-w-0"},le={class:"text-sm font-medium text-gray-900 truncate"},de={class:"text-xs text-gray-500 truncate"},ue={key:1,class:"flex justify-center"},ce={__name:"Sidebar",props:{isOpen:{type:Boolean,default:!0}},emits:["close"],setup(n){const r=H(),h=R(),i=y(null),u=[{name:"Dashboard",to:"/dashboard",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"},{name:"Search",to:"/search",icon:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},{name:"Company Advanced",to:"/company-advanced",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{name:"Company Full",to:"/company-full",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{name:"Company Status",to:"/company-status",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{name:"Visure",to:"/visure",icon:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{name:"Files",to:"/files",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{name:"Profile",to:"/profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"}];return A(async()=>{try{i.value=await h.getCredit()}catch(d){console.error("Failed to fetch credit info:",d)}}),(d,s)=>{var k,f;return o(),a("div",G,[n.isOpen?(o(),a("div",{key:0,class:"fixed inset-0 bg-gray-900/50 lg:hidden z-40",onClick:s[0]||(s[0]=x=>d.$emit("close"))})):v("",!0),e("div",{class:g(["fixed top-0 left-0 z-50 h-full bg-white border-r border-gray-200 transition-all duration-200 ease-in-out shadow-lg",n.isOpen?"w-64":"w-20","lg:translate-x-0",n.isOpen?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",J,[n.isOpen?(o(),a("div",X,s[1]||(s[1]=[e("div",{class:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1),e("span",{class:"font-display font-bold text-gray-900"},"OpenAPI",-1)]))):(o(),a("div",Y,s[2]||(s[2]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)])))]),e("nav",Z,[e("div",ee,[(o(),a(F,null,D(u,x=>p(W,{key:x.name,item:x,"is-open":n.isOpen},null,8,["item","is-open"])),64))])]),n.isOpen&&i.value?(o(),a("div",te,[e("div",se,[e("div",oe,[s[4]||(s[4]=e("div",{class:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",null,[s[3]||(s[3]=e("p",{class:"text-sm font-medium text-primary-900"},"Credit",-1)),e("p",re,m(i.value.remaining||0)+" remaining",1)])])])])):v("",!0),e("div",ae,[n.isOpen?(o(),a("div",ne,[s[5]||(s[5]=e("div",{class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",ie,[e("p",le,m(((k=b(r).user)==null?void 0:k.email)||"User"),1),e("p",de,m(((f=b(r).user)==null?void 0:f.role)||"user"),1)])])):(o(),a("div",ue,s[6]||(s[6]=[e("div",{class:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)])))])],2)])}}},me={class:"bg-white border-b border-gray-200 shadow-sm"},he={class:"flex items-center justify-between px-6 py-4"},pe={class:"flex items-center space-x-4"},ve={class:"flex","aria-label":"Breadcrumb"},fe={class:"flex items-center space-x-2"},xe={key:0,class:"w-4 h-4 text-gray-400 mx-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye={key:2,class:"text-sm font-medium text-gray-900"},ge={class:"flex items-center space-x-4"},ke={class:"relative"},we={class:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center"},be={class:"text-sm font-medium text-white"},_e={class:"hidden md:block text-left"},Ce={class:"text-sm font-medium text-gray-900"},Me={class:"text-xs text-gray-500"},$e={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50"},ze={__name:"Header",emits:["toggle-sidebar"],setup(n){const r=S(),h=q(),i=H(),u=y(""),d=y(!1),s=y(null),k=M(()=>{var t;return(((t=i.user)==null?void 0:t.email)||"").charAt(0).toUpperCase()}),f=M(()=>{const l=[];return r.name==="Dashboard"?l.push({name:"Dashboard"}):r.name==="Search"?l.push({name:"Search",to:"/search"}):r.name==="CompanyDetail"?(l.push({name:"Search",to:"/search"}),l.push({name:`Company ${r.params.piva}`})):r.name==="Files"?l.push({name:"Files"}):r.name==="Profile"&&l.push({name:"Profile"}),l}),x=()=>{u.value.trim()&&h.push({name:"Search",query:{q:u.value.trim()}})},L=async()=>{try{await i.logout(),h.push("/auth/login")}catch(l){console.error("Logout failed:",l)}},z=l=>{s.value&&!s.value.contains(l.target)&&(d.value=!1)};return A(()=>{document.addEventListener("click",z)}),I(()=>{document.removeEventListener("click",z)}),(l,t)=>{var B,V;const j=$("router-link");return o(),a("header",me,[e("div",he,[e("div",pe,[e("button",{onClick:t[0]||(t[0]=c=>l.$emit("toggle-sidebar")),class:"p-2 rounded-lg text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200"},t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])),e("nav",ve,[e("ol",fe,[(o(!0),a(F,null,D(f.value,(c,_)=>(o(),a("li",{key:_,class:"flex items-center"},[_>0?(o(),a("svg",xe,t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)]))):v("",!0),c.to?(o(),O(j,{key:1,to:c.to,class:g(["text-sm font-medium transition-colors duration-200",_===f.value.length-1?"text-gray-900":"text-gray-500 hover:text-gray-700"])},{default:w(()=>[C(m(c.name),1)]),_:2},1032,["to","class"])):(o(),a("span",ye,m(c.name),1))]))),128))])])]),e("div",ge,[e("div",ke,[P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>u.value=c),type:"text",placeholder:"Quick search...",class:"w-64 pl-10 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 transition-all duration-200",onKeyup:U(x,["enter"])},null,544),[[T,u.value]]),t[6]||(t[6]=e("svg",{class:"absolute left-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),t[11]||(t[11]=e("button",{class:"relative p-2 rounded-lg text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zm-4-3.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),e("span",{class:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})],-1)),e("div",{class:"relative",ref_key:"userMenuRef",ref:s},[e("button",{onClick:t[2]||(t[2]=c=>d.value=!d.value),class:"flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[e("div",we,[e("span",be,m(k.value),1)]),e("div",_e,[e("p",Ce,m((B=b(i).user)==null?void 0:B.email),1),e("p",Me,m((V=b(i).user)==null?void 0:V.role),1)]),t[7]||(t[7]=e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),p(N,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:w(()=>[d.value?(o(),a("div",$e,[p(j,{to:"/profile",class:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",onClick:t[3]||(t[3]=c=>d.value=!1)},{default:w(()=>t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),C(" Profile ")])),_:1,__:[8]}),t[10]||(t[10]=e("hr",{class:"my-2 border-gray-200"},null,-1)),e("button",{onClick:L,class:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200"},t[9]||(t[9]=[e("svg",{class:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),C(" Sign out ")]))])):v("",!0)]),_:1})],512)])])])}}},je={class:"min-h-screen bg-gray-50"},Be={class:"p-6"},Ve={class:"max-w-7xl mx-auto"},He={__name:"AppLayout",setup(n){const r=y(!0);return(h,i)=>{const u=$("router-view");return o(),a("div",je,[p(ce,{"is-open":r.value,onClose:i[0]||(i[0]=d=>r.value=!1)},null,8,["is-open"]),e("div",{class:g(["transition-all duration-200 ease-in-out",r.value?"lg:ml-64":"lg:ml-20"])},[p(ze,{onToggleSidebar:i[1]||(i[1]=d=>r.value=!r.value)}),e("main",Be,[e("div",Ve,[p(u)])])],2)])}}};export{He as default};
