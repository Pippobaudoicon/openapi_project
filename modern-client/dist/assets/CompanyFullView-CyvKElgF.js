import{f as m,c as a,a as t,h as l,w as g,v as f,B as _,i as c,m as h,t as i,F as b,s as w,o as r}from"./index-Cy8y1Ck6.js";import{u as k}from"./company-C-ste4eM.js";const C={class:"space-y-6"},F={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},N={class:"flex gap-4"},A={class:"flex-1"},D=["disabled"],L={key:0,class:"spinner mr-2"},R={key:0,class:"bg-red-50 border border-red-200 rounded-xl p-4"},V={class:"flex items-center"},B={class:"text-red-700"},E={key:1,class:"space-y-6"},S={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},j={class:"space-y-4"},z={key:0},M={class:"text-lg font-semibold text-gray-900"},T={key:1},K={class:"text-sm text-gray-900"},O={key:2},P={class:"text-sm text-gray-900"},U={class:"space-y-4"},$={key:0},G={class:"text-sm text-gray-900"},H={key:1},J={class:"text-sm text-gray-900"},Y={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},q={class:"overflow-x-auto"},Q={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},X={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},et={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},st={key:0,class:"bg-gray-50 rounded-lg p-4 text-xs overflow-auto"},it={__name:"CompanyFullView",setup(ot){const d=k(),u=m(""),o=m(null),p=m(!1),x=async()=>{if(u.value)try{const s=await d.getCompanyFull(u.value);o.value=s.data}catch(s){console.error("Error fetching full data:",s)}},y=s=>{if(!s)return"N/A";if(typeof s=="string")return s;const e=[];return s.via&&e.push(s.via),s.civico&&e.push(s.civico),s.cap&&e.push(s.cap),s.comune&&e.push(s.comune),s.provincia&&e.push(`(${s.provincia})`),e.join(" ")},v=s=>s?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(s):"N/A";return(s,e)=>(r(),a("div",C,[t("div",F,[e[2]||(e[2]=t("h1",{class:"text-2xl font-bold text-gray-900 mb-4"},"Full Company Report",-1)),t("div",N,[t("div",A,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>u.value=n),type:"text",placeholder:"Enter P.IVA (e.g., 12345678901)",class:"input-field",onKeyup:_(x,["enter"])},null,544),[[f,u.value]])]),t("button",{onClick:x,disabled:!u.value||c(d).isLoading,class:"btn-primary"},[c(d).isLoading?(r(),a("svg",L)):l("",!0),h(" "+i(c(d).isLoading?"Loading...":"Get Full Report"),1)],8,D)])]),c(d).error?(r(),a("div",R,[t("div",V,[e[3]||(e[3]=t("svg",{class:"w-5 h-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",B,i(c(d).error),1)])])):l("",!0),o.value?(r(),a("div",E,[t("div",S,[e[9]||(e[9]=t("div",{class:"flex items-center justify-between mb-6"},[t("h2",{class:"text-xl font-semibold text-gray-900"},"Company Overview"),t("span",{class:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full"}," Full Report ")],-1)),t("div",I,[t("div",j,[o.value.denominazione?(r(),a("div",z,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500"},"Company Name",-1)),t("dd",M,i(o.value.denominazione),1)])):l("",!0),o.value.piva?(r(),a("div",T,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500"},"P.IVA",-1)),t("dd",K,i(o.value.piva),1)])):l("",!0),o.value.codice_fiscale?(r(),a("div",O,[e[6]||(e[6]=t("dt",{class:"text-sm font-medium text-gray-500"},"Codice Fiscale",-1)),t("dd",P,i(o.value.codice_fiscale),1)])):l("",!0)]),t("div",U,[o.value.sede_legale?(r(),a("div",$,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500"},"Legal Address",-1)),t("dd",G,i(y(o.value.sede_legale)),1)])):l("",!0),o.value.forma_giuridica?(r(),a("div",H,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Legal Form",-1)),t("dd",J,i(o.value.forma_giuridica),1)])):l("",!0)])])]),o.value.bilanci?(r(),a("div",Y,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Financial Data",-1)),t("div",q,[t("table",Q,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Year"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenue"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Employees")])],-1)),t("tbody",W,[(r(!0),a(b,null,w(o.value.bilanci.slice(0,5),n=>(r(),a("tr",{key:n.anno},[t("td",X,i(n.anno),1),t("td",Z,i(v(n.fatturato)),1),t("td",tt,i(n.dipendenti||"N/A"),1)]))),128))])])])])):l("",!0),t("div",et,[t("button",{onClick:e[1]||(e[1]=n=>p.value=!p.value),class:"text-sm text-gray-600 hover:text-gray-900 transition-colors mb-4"},i(p.value?"Hide":"Show")+" Raw Data ",1),p.value?(r(),a("pre",st,i(JSON.stringify(o.value,null,2)),1)):l("",!0)])])):l("",!0)]))}};export{it as default};
