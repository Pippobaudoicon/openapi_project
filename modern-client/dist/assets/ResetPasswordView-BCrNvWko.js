import{u as g,f as m,q as _,g as P,y as M,p as C,w as p,c as r,a as e,h as l,t as w,i as n,n as j,j as B,v as L,m as k,d as V,l as R,r as N,e as q,o as a}from"./index-Cy8y1Ck6.js";const z={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl"},D={class:"flex items-center"},E={class:"text-green-700 text-sm"},S={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl"},T={class:"flex items-center"},A={class:"text-red-700 text-sm"},U={class:"relative"},F=["type","disabled"],I=["disabled"],$={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},G={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H=["disabled"],J={key:0,class:"text-xs text-red-500 mt-1"},K=["disabled"],O={key:0,class:"spinner mr-3"},Q={class:"mt-6 text-center"},Y={__name:"ResetPasswordView",setup(W){const v=M(),f=C(),t=g(),o=m({password:"",confirmPassword:""}),i=m(!1),d=m(""),x=_(()=>o.value.password&&o.value.confirmPassword&&o.value.password===o.value.confirmPassword&&o.value.password.length>=8),y=async()=>{try{const u=v.query.token;if(!u){t.error="Invalid reset token";return}const s=await t.resetPassword(u,o.value.password);d.value=s.message||"Password reset successfully!",setTimeout(()=>{f.push("/auth/login")},2e3)}catch{}};return P(()=>{t.clearError(),v.query.token||f.push("/auth/forgot-password")}),(u,s)=>{const b=N("router-link"),h=q("motion-fade-visible-once");return p((a(),r("div",null,[s[10]||(s[10]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Reset your password"),e("p",{class:"text-gray-600 mt-2"},"Enter your new password below")],-1)),d.value?(a(),r("div",z,[e("div",D,[s[3]||(s[3]=e("svg",{class:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",E,w(d.value),1)])])):l("",!0),n(t).error?(a(),r("div",S,[e("div",T,[s[4]||(s[4]=e("svg",{class:"w-5 h-5 text-red-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",A,w(n(t).error),1)])])):l("",!0),d.value?l("",!0):(a(),r("form",{key:2,onSubmit:j(y,["prevent"]),class:"space-y-5"},[e("div",null,[s[7]||(s[7]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},"New Password",-1)),e("div",U,[p(e("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=c=>o.value.password=c),type:i.value?"text":"password",required:"",class:"input-field pr-12",placeholder:"Enter your new password",disabled:n(t).isLoading},null,8,F),[[B,o.value.password]]),e("button",{type:"button",onClick:s[1]||(s[1]=c=>i.value=!i.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:n(t).isLoading},[i.value?(a(),r("svg",$,s[5]||(s[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(a(),r("svg",G,s[6]||(s[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"},null,-1)])))],8,I)])]),e("div",null,[s[8]||(s[8]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"},"Confirm New Password",-1)),p(e("input",{id:"confirmPassword","onUpdate:modelValue":s[2]||(s[2]=c=>o.value.confirmPassword=c),type:"password",required:"",class:"input-field",placeholder:"Confirm your new password",disabled:n(t).isLoading},null,8,H),[[L,o.value.confirmPassword]]),o.value.confirmPassword&&o.value.password!==o.value.confirmPassword?(a(),r("p",J," Passwords do not match ")):l("",!0)]),e("button",{type:"submit",disabled:n(t).isLoading||!x.value,class:"w-full btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[n(t).isLoading?(a(),r("svg",O)):l("",!0),k(" "+w(n(t).isLoading?"Resetting...":"Reset password"),1)],8,K)],32)),e("div",Q,[V(b,{to:"/auth/login",class:"text-sm text-primary-600 hover:text-primary-500 font-medium transition-colors flex items-center justify-center"},{default:R(()=>s[9]||(s[9]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),k(" Back to sign in ")])),_:1,__:[9]})])])),[[h]])}}};export{Y as default};
