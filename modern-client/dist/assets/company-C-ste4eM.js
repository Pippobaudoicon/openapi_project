import{H as y,f as l,q as p,I as n}from"./index-Cy8y1Ck6.js";const T=y("company",()=>{const v=l([]),u=l(null),c=l([]),o=l(!1),r=l(null),i=l({q:"",provincia:"",codice_ateco:"",fatturato_min:"",fatturato_max:"",dipendenti_min:"",dipendenti_max:"",from:0,size:10}),m=p(()=>c.value.length>0),h=p(()=>c.value.length);return{companies:v,currentCompany:u,searchResults:c,searchParams:i,isLoading:o,error:r,hasResults:m,totalResults:h,searchCompanies:async(s={})=>{var t,a;o.value=!0,r.value=null;try{const e={...i.value,...s},d=await n.get("/search",{params:e});return c.value=d.data.hits||d.data.companies||[],d.data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Search failed",e}finally{o.value=!1}},getCompanyAdvanced:async s=>{var t,a;o.value=!0,r.value=null;try{const e=await n.get(`/IT-advanced/${s}`);return u.value=e.data.data,e.data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch company data",e}finally{o.value=!1}},getCompanyFull:async s=>{var t,a;o.value=!0,r.value=null;try{const e=await n.get(`/IT-full/${s}`);return u.value=e.data.data,e.data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch full company data",e}finally{o.value=!1}},getCompanyClosed:async s=>{var t,a;o.value=!0,r.value=null;try{return(await n.get(`/IT-closed/${s}`)).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to check company status",e}finally{o.value=!1}},getImpresaData:async s=>{var t,a;o.value=!0,r.value=null;try{return(await n.get(`/impresa/${s}`)).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to fetch impresa data",e}finally{o.value=!1}},searchImpresa:async(s={})=>{var t,a;o.value=!0,r.value=null;try{return(await n.get("/impresa",{params:s})).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Impresa search failed",e}finally{o.value=!1}},requestBilancioOttico:async s=>{var t,a;o.value=!0,r.value=null;try{return(await n.post("/bilancio-ottico",{piva:s})).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to request bilancio ottico",e}finally{o.value=!1}},getBilancioOtticoStatus:async s=>{var t,a;o.value=!0,r.value=null;try{return(await n.get(`/bilancio-ottico/${s}`)).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to get bilancio ottico status",e}finally{o.value=!1}},downloadBilancioOtticoFiles:async s=>{var t,a;try{return(await n.get(`/bilancio-ottico/${s}/allegati`,{responseType:"blob"})).data}catch(e){throw r.value=((a=(t=e.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to download files",e}},getAllVisure:async()=>{var s,t;o.value=!0,r.value=null;try{return(await n.get("/visure")).data}catch(a){throw r.value=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch visure data",a}finally{o.value=!1}},getAllBilancioOtticoRequests:async()=>{var s,t;o.value=!0,r.value=null;try{return(await n.get("/bilancio-ottico")).data}catch(a){throw r.value=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch bilancio ottico requests",a}finally{o.value=!1}},getCredit:async()=>{var s,t;try{return(await n.get("/credit")).data}catch(a){throw r.value=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to fetch credit info",a}},updateSearchParams:s=>{i.value={...i.value,...s}},clearSearch:()=>{c.value=[],i.value={q:"",provincia:"",codice_ateco:"",fatturato_min:"",fatturato_max:"",dipendenti_min:"",dipendenti_max:"",from:0,size:10}},clearError:()=>{r.value=null}}});export{T as u};
